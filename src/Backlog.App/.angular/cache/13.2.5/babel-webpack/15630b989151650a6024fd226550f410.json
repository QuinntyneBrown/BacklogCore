{"ast":null,"code":"import _asyncToGenerator from \"C:\\\\projects\\\\Backlog\\\\src\\\\Backlog.App\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\asyncToGenerator.js\";\nimport { forwardRef } from '@angular/core';\nimport { NG_VALUE_ACCESSOR } from '@angular/forms';\nimport { switchMap, takeUntil, tap } from 'rxjs/operators';\nimport { fromEvent, Subject } from 'rxjs';\nimport { BaseControl } from '@core';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@api\";\nimport * as i2 from \"@angular/material/icon\";\nconst _c0 = [\"input\"];\nexport class ChooseAFileOrDragItHereComponent extends BaseControl {\n  constructor(_digitalAssetService, _elementRef) {\n    super();\n    this._digitalAssetService = _digitalAssetService;\n    this._elementRef = _elementRef;\n    this._digitalAssetIds$ = new Subject();\n    this._fileToUpload$ = new Subject();\n    this.idOnly = true;\n    this.digitalAssetId$ = new Subject();\n  }\n\n  ngAfterViewInit() {\n    fromEvent(this._elementRef.nativeElement, \"dragover\").pipe(tap(x => this.onDragOver(x)), takeUntil(this._destroyed$)).subscribe();\n    fromEvent(this._elementRef.nativeElement, \"drop\").pipe(tap(x => this.onDrop(x)), takeUntil(this._destroyed$)).subscribe();\n  }\n\n  onDrop(e) {\n    var _this = this;\n\n    return _asyncToGenerator(function* () {\n      e.stopPropagation();\n      e.preventDefault();\n\n      if (e.dataTransfer && e.dataTransfer.files) {\n        const packageFiles = function (fileList) {\n          const formData = new FormData();\n\n          for (var i = 0; i < fileList.length; i++) {\n            formData.append(fileList[i].name, fileList[i]);\n          }\n\n          return formData;\n        };\n\n        const data = packageFiles(e.dataTransfer.files);\n\n        _this._digitalAssetService.upload({\n          data\n        }).pipe(switchMap(x => _this._digitalAssetService.getByIds({\n          digitalAssetIds: x.digitalAssetIds\n        })), tap(x => {\n          if (_this.idOnly) {\n            _this.digitalAssetId$.next(x[0].digitalAssetId);\n          } else {\n            _this.digitalAssetId$.next(x[0]);\n          }\n        }), takeUntil(_this._destroyed$)).subscribe();\n      }\n    })();\n  }\n\n  registerOnChange(fn) {\n    this._digitalAssetIds$.pipe(takeUntil(this._destroyed$)).subscribe(fn);\n  }\n\n  onDragOver(e) {\n    e.stopPropagation();\n    e.preventDefault();\n  }\n\n  handleFileInput(files) {\n    this._fileToUpload$.next(files[0]);\n  }\n\n  handleChooseAFileClick() {\n    this.fileInput.nativeElement.click();\n  }\n\n}\n\nChooseAFileOrDragItHereComponent.ɵfac = function ChooseAFileOrDragItHereComponent_Factory(t) {\n  return new (t || ChooseAFileOrDragItHereComponent)(i0.ɵɵdirectiveInject(i1.DigitalAssetService), i0.ɵɵdirectiveInject(i0.ElementRef));\n};\n\nChooseAFileOrDragItHereComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: ChooseAFileOrDragItHereComponent,\n  selectors: [[\"bl-choose-a-file-or-drag-it-here\"]],\n  viewQuery: function ChooseAFileOrDragItHereComponent_Query(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵviewQuery(_c0, 7);\n    }\n\n    if (rf & 2) {\n      let _t;\n\n      i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.fileInput = _t.first);\n    }\n  },\n  inputs: {\n    idOnly: \"idOnly\"\n  },\n  features: [i0.ɵɵProvidersFeature([{\n    provide: NG_VALUE_ACCESSOR,\n    useExisting: forwardRef(() => ChooseAFileOrDragItHereComponent),\n    multi: true\n  }]), i0.ɵɵInheritDefinitionFeature],\n  decls: 9,\n  vars: 0,\n  consts: [[1, \"choose-a-file-or-drag-it-here__content\"], [1, \"choose-a-file-or-drag-it-here__cta\", 3, \"click\"], [\"type\", \"file\", \"accept\", \"image/*\", 3, \"change\"], [\"input\", \"\"]],\n  template: function ChooseAFileOrDragItHereComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"div\", 0)(1, \"mat-icon\");\n      i0.ɵɵtext(2, \" upload \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(3, \"h1\", 1);\n      i0.ɵɵlistener(\"click\", function ChooseAFileOrDragItHereComponent_Template_h1_click_3_listener() {\n        return ctx.handleChooseAFileClick();\n      });\n      i0.ɵɵtext(4, \" Choose a file \");\n      i0.ɵɵelementStart(5, \"span\");\n      i0.ɵɵtext(6, \" or drag it here \");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(7, \"input\", 2, 3);\n      i0.ɵɵlistener(\"change\", function ChooseAFileOrDragItHereComponent_Template_input_change_7_listener($event) {\n        return ctx.handleFileInput($event.target.files);\n      });\n      i0.ɵɵelementEnd()();\n    }\n  },\n  directives: [i2.MatIcon],\n  styles: [\"[_nghost-%COMP%] {\\n  display: grid;\\n  place-items: center;\\n  box-sizing: border-box;\\n  width: 100%;\\n  min-height: 275px;\\n  border: 1px #DDD dashed;\\n  padding: 10px;\\n}\\n[_nghost-%COMP%]   .choose-a-file-or-drag-it-here__content[_ngcontent-%COMP%] {\\n  text-align: center;\\n}\\n[_nghost-%COMP%]   mat-icon.mat-icon[_ngcontent-%COMP%] {\\n  --icon-size: 65px;\\n  color: #BBB;\\n  font-size: var(--icon-size);\\n  height: var(--icon-size);\\n  width: var(--icon-size);\\n  margin-bottom: 15px;\\n}\\n[_nghost-%COMP%]   .choose-a-file-or-drag-it-here__cta[_ngcontent-%COMP%] {\\n  font-weight: 500;\\n  cursor: pointer;\\n}\\n[_nghost-%COMP%]   .choose-a-file-or-drag-it-here__cta[_ngcontent-%COMP%]   span[_ngcontent-%COMP%] {\\n  font-weight: 400;\\n}\\n[_nghost-%COMP%]   input[_ngcontent-%COMP%] {\\n  opacity: 0;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNob29zZS1hLWZpbGUtb3ItZHJhZy1pdC1oZXJlLmNvbXBvbmVudC5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBQ0UsYUFBQTtFQUNBLG1CQUFBO0VBQ0Esc0JBQUE7RUFDQSxXQUFBO0VBQ0EsaUJBQUE7RUFDQSx1QkFBQTtFQUNBLGFBQUE7QUFDRjtBQUtFO0VBQ0Usa0JBQUE7QUFISjtBQU1FO0VBQ0UsaUJBQUE7RUFDQSxXQUFBO0VBQ0EsMkJBQUE7RUFDQSx3QkFBQTtFQUNBLHVCQUFBO0VBQ0EsbUJBQUE7QUFKSjtBQU9FO0VBQ0UsZ0JBQUE7RUFDQSxlQUFBO0FBTEo7QUFNSTtFQUNFLGdCQUFBO0FBSk47QUFRRTtFQUNFLFVBQUE7QUFOSiIsImZpbGUiOiJjaG9vc2UtYS1maWxlLW9yLWRyYWctaXQtaGVyZS5jb21wb25lbnQuc2NzcyIsInNvdXJjZXNDb250ZW50IjpbIjpob3N0IHtcclxuICBkaXNwbGF5OiBncmlkO1xyXG4gIHBsYWNlLWl0ZW1zOiBjZW50ZXI7XHJcbiAgYm94LXNpemluZzogYm9yZGVyLWJveDtcclxuICB3aWR0aDogMTAwJTtcclxuICBtaW4taGVpZ2h0OiAyNzVweDtcclxuICBib3JkZXI6IDFweCAjREREIGRhc2hlZDtcclxuICBwYWRkaW5nOjEwcHg7XHJcblxyXG4gICY6aG92ZXIge1xyXG5cclxuICB9XHJcblxyXG4gIC5jaG9vc2UtYS1maWxlLW9yLWRyYWctaXQtaGVyZV9fY29udGVudCB7XHJcbiAgICB0ZXh0LWFsaWduOiBjZW50ZXI7XHJcbiAgfVxyXG5cclxuICBtYXQtaWNvbi5tYXQtaWNvbiB7XHJcbiAgICAtLWljb24tc2l6ZTogNjVweDtcclxuICAgIGNvbG9yOiAjQkJCO1xyXG4gICAgZm9udC1zaXplOiB2YXIoLS1pY29uLXNpemUpO1xyXG4gICAgaGVpZ2h0OiB2YXIoLS1pY29uLXNpemUpO1xyXG4gICAgd2lkdGg6IHZhcigtLWljb24tc2l6ZSk7XHJcbiAgICBtYXJnaW4tYm90dG9tOiAxNXB4O1xyXG4gIH1cclxuXHJcbiAgLmNob29zZS1hLWZpbGUtb3ItZHJhZy1pdC1oZXJlX19jdGEge1xyXG4gICAgZm9udC13ZWlnaHQ6IDUwMDtcclxuICAgIGN1cnNvcjogcG9pbnRlcjtcclxuICAgIHNwYW4ge1xyXG4gICAgICBmb250LXdlaWdodDogNDAwO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgaW5wdXQge1xyXG4gICAgb3BhY2l0eTogMDtcclxuICB9XHJcbn1cclxuIl19 */\"]\n});","map":{"version":3,"sources":["C:/projects/Backlog/src/Backlog.App/src/app/@shared/components/choose-a-file-or-drag-it-here/choose-a-file-or-drag-it-here.component.ts"],"names":["forwardRef","NG_VALUE_ACCESSOR","switchMap","takeUntil","tap","fromEvent","Subject","BaseControl","i0","i1","i2","_c0","ChooseAFileOrDragItHereComponent","constructor","_digitalAssetService","_elementRef","_digitalAssetIds$","_fileToUpload$","idOnly","digitalAssetId$","ngAfterViewInit","nativeElement","pipe","x","onDragOver","_destroyed$","subscribe","onDrop","e","stopPropagation","preventDefault","dataTransfer","files","packageFiles","fileList","formData","FormData","i","length","append","name","data","upload","getByIds","digitalAssetIds","next","digitalAssetId","registerOnChange","fn","handleFileInput","handleChooseAFileClick","fileInput","click","ɵfac","ChooseAFileOrDragItHereComponent_Factory","t","ɵɵdirectiveInject","DigitalAssetService","ElementRef","ɵcmp","ɵɵdefineComponent","type","selectors","viewQuery","ChooseAFileOrDragItHereComponent_Query","rf","ctx","ɵɵviewQuery","_t","ɵɵqueryRefresh","ɵɵloadQuery","first","inputs","features","ɵɵProvidersFeature","provide","useExisting","multi","ɵɵInheritDefinitionFeature","decls","vars","consts","template","ChooseAFileOrDragItHereComponent_Template","ɵɵelementStart","ɵɵtext","ɵɵelementEnd","ɵɵlistener","ChooseAFileOrDragItHereComponent_Template_h1_click_3_listener","ChooseAFileOrDragItHereComponent_Template_input_change_7_listener","$event","target","directives","MatIcon","styles"],"mappings":"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","sourcesContent":["import { forwardRef } from '@angular/core';\r\nimport { NG_VALUE_ACCESSOR } from '@angular/forms';\r\nimport { switchMap, takeUntil, tap } from 'rxjs/operators';\r\nimport { fromEvent, Subject } from 'rxjs';\r\nimport { BaseControl } from '@core';\r\nimport * as i0 from \"@angular/core\";\r\nimport * as i1 from \"@api\";\r\nimport * as i2 from \"@angular/material/icon\";\r\nconst _c0 = [\"input\"];\r\nexport class ChooseAFileOrDragItHereComponent extends BaseControl {\r\n    constructor(_digitalAssetService, _elementRef) {\r\n        super();\r\n        this._digitalAssetService = _digitalAssetService;\r\n        this._elementRef = _elementRef;\r\n        this._digitalAssetIds$ = new Subject();\r\n        this._fileToUpload$ = new Subject();\r\n        this.idOnly = true;\r\n        this.digitalAssetId$ = new Subject();\r\n    }\r\n    ngAfterViewInit() {\r\n        fromEvent(this._elementRef.nativeElement, \"dragover\")\r\n            .pipe(tap((x) => this.onDragOver(x)), takeUntil(this._destroyed$)).subscribe();\r\n        fromEvent(this._elementRef.nativeElement, \"drop\")\r\n            .pipe(tap((x) => this.onDrop(x)), takeUntil(this._destroyed$)).subscribe();\r\n    }\r\n    async onDrop(e) {\r\n        e.stopPropagation();\r\n        e.preventDefault();\r\n        if (e.dataTransfer && e.dataTransfer.files) {\r\n            const packageFiles = function (fileList) {\r\n                const formData = new FormData();\r\n                for (var i = 0; i < fileList.length; i++) {\r\n                    formData.append(fileList[i].name, fileList[i]);\r\n                }\r\n                return formData;\r\n            };\r\n            const data = packageFiles(e.dataTransfer.files);\r\n            this._digitalAssetService.upload({ data })\r\n                .pipe(switchMap((x) => this._digitalAssetService.getByIds({ digitalAssetIds: x.digitalAssetIds })), tap(x => {\r\n                if (this.idOnly) {\r\n                    this.digitalAssetId$.next(x[0].digitalAssetId);\r\n                }\r\n                else {\r\n                    this.digitalAssetId$.next(x[0]);\r\n                }\r\n            }), takeUntil(this._destroyed$))\r\n                .subscribe();\r\n        }\r\n    }\r\n    registerOnChange(fn) {\r\n        this._digitalAssetIds$\r\n            .pipe(takeUntil(this._destroyed$))\r\n            .subscribe(fn);\r\n    }\r\n    onDragOver(e) {\r\n        e.stopPropagation();\r\n        e.preventDefault();\r\n    }\r\n    handleFileInput(files) {\r\n        this._fileToUpload$.next(files[0]);\r\n    }\r\n    handleChooseAFileClick() { this.fileInput.nativeElement.click(); }\r\n}\r\nChooseAFileOrDragItHereComponent.ɵfac = function ChooseAFileOrDragItHereComponent_Factory(t) { return new (t || ChooseAFileOrDragItHereComponent)(i0.ɵɵdirectiveInject(i1.DigitalAssetService), i0.ɵɵdirectiveInject(i0.ElementRef)); };\r\nChooseAFileOrDragItHereComponent.ɵcmp = /*@__PURE__*/ i0.ɵɵdefineComponent({ type: ChooseAFileOrDragItHereComponent, selectors: [[\"bl-choose-a-file-or-drag-it-here\"]], viewQuery: function ChooseAFileOrDragItHereComponent_Query(rf, ctx) { if (rf & 1) {\r\n        i0.ɵɵviewQuery(_c0, 7);\r\n    } if (rf & 2) {\r\n        let _t;\r\n        i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.fileInput = _t.first);\r\n    } }, inputs: { idOnly: \"idOnly\" }, features: [i0.ɵɵProvidersFeature([\r\n            {\r\n                provide: NG_VALUE_ACCESSOR,\r\n                useExisting: forwardRef(() => ChooseAFileOrDragItHereComponent),\r\n                multi: true\r\n            }\r\n        ]), i0.ɵɵInheritDefinitionFeature], decls: 9, vars: 0, consts: [[1, \"choose-a-file-or-drag-it-here__content\"], [1, \"choose-a-file-or-drag-it-here__cta\", 3, \"click\"], [\"type\", \"file\", \"accept\", \"image/*\", 3, \"change\"], [\"input\", \"\"]], template: function ChooseAFileOrDragItHereComponent_Template(rf, ctx) { if (rf & 1) {\r\n        i0.ɵɵelementStart(0, \"div\", 0)(1, \"mat-icon\");\r\n        i0.ɵɵtext(2, \" upload \");\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelementStart(3, \"h1\", 1);\r\n        i0.ɵɵlistener(\"click\", function ChooseAFileOrDragItHereComponent_Template_h1_click_3_listener() { return ctx.handleChooseAFileClick(); });\r\n        i0.ɵɵtext(4, \" Choose a file \");\r\n        i0.ɵɵelementStart(5, \"span\");\r\n        i0.ɵɵtext(6, \" or drag it here \");\r\n        i0.ɵɵelementEnd()();\r\n        i0.ɵɵelementStart(7, \"input\", 2, 3);\r\n        i0.ɵɵlistener(\"change\", function ChooseAFileOrDragItHereComponent_Template_input_change_7_listener($event) { return ctx.handleFileInput($event.target.files); });\r\n        i0.ɵɵelementEnd()();\r\n    } }, directives: [i2.MatIcon], styles: [\"[_nghost-%COMP%] {\\n  display: grid;\\n  place-items: center;\\n  box-sizing: border-box;\\n  width: 100%;\\n  min-height: 275px;\\n  border: 1px #DDD dashed;\\n  padding: 10px;\\n}\\n[_nghost-%COMP%]   .choose-a-file-or-drag-it-here__content[_ngcontent-%COMP%] {\\n  text-align: center;\\n}\\n[_nghost-%COMP%]   mat-icon.mat-icon[_ngcontent-%COMP%] {\\n  --icon-size: 65px;\\n  color: #BBB;\\n  font-size: var(--icon-size);\\n  height: var(--icon-size);\\n  width: var(--icon-size);\\n  margin-bottom: 15px;\\n}\\n[_nghost-%COMP%]   .choose-a-file-or-drag-it-here__cta[_ngcontent-%COMP%] {\\n  font-weight: 500;\\n  cursor: pointer;\\n}\\n[_nghost-%COMP%]   .choose-a-file-or-drag-it-here__cta[_ngcontent-%COMP%]   span[_ngcontent-%COMP%] {\\n  font-weight: 400;\\n}\\n[_nghost-%COMP%]   input[_ngcontent-%COMP%] {\\n  opacity: 0;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNob29zZS1hLWZpbGUtb3ItZHJhZy1pdC1oZXJlLmNvbXBvbmVudC5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBQ0UsYUFBQTtFQUNBLG1CQUFBO0VBQ0Esc0JBQUE7RUFDQSxXQUFBO0VBQ0EsaUJBQUE7RUFDQSx1QkFBQTtFQUNBLGFBQUE7QUFDRjtBQUtFO0VBQ0Usa0JBQUE7QUFISjtBQU1FO0VBQ0UsaUJBQUE7RUFDQSxXQUFBO0VBQ0EsMkJBQUE7RUFDQSx3QkFBQTtFQUNBLHVCQUFBO0VBQ0EsbUJBQUE7QUFKSjtBQU9FO0VBQ0UsZ0JBQUE7RUFDQSxlQUFBO0FBTEo7QUFNSTtFQUNFLGdCQUFBO0FBSk47QUFRRTtFQUNFLFVBQUE7QUFOSiIsImZpbGUiOiJjaG9vc2UtYS1maWxlLW9yLWRyYWctaXQtaGVyZS5jb21wb25lbnQuc2NzcyIsInNvdXJjZXNDb250ZW50IjpbIjpob3N0IHtcclxuICBkaXNwbGF5OiBncmlkO1xyXG4gIHBsYWNlLWl0ZW1zOiBjZW50ZXI7XHJcbiAgYm94LXNpemluZzogYm9yZGVyLWJveDtcclxuICB3aWR0aDogMTAwJTtcclxuICBtaW4taGVpZ2h0OiAyNzVweDtcclxuICBib3JkZXI6IDFweCAjREREIGRhc2hlZDtcclxuICBwYWRkaW5nOjEwcHg7XHJcblxyXG4gICY6aG92ZXIge1xyXG5cclxuICB9XHJcblxyXG4gIC5jaG9vc2UtYS1maWxlLW9yLWRyYWctaXQtaGVyZV9fY29udGVudCB7XHJcbiAgICB0ZXh0LWFsaWduOiBjZW50ZXI7XHJcbiAgfVxyXG5cclxuICBtYXQtaWNvbi5tYXQtaWNvbiB7XHJcbiAgICAtLWljb24tc2l6ZTogNjVweDtcclxuICAgIGNvbG9yOiAjQkJCO1xyXG4gICAgZm9udC1zaXplOiB2YXIoLS1pY29uLXNpemUpO1xyXG4gICAgaGVpZ2h0OiB2YXIoLS1pY29uLXNpemUpO1xyXG4gICAgd2lkdGg6IHZhcigtLWljb24tc2l6ZSk7XHJcbiAgICBtYXJnaW4tYm90dG9tOiAxNXB4O1xyXG4gIH1cclxuXHJcbiAgLmNob29zZS1hLWZpbGUtb3ItZHJhZy1pdC1oZXJlX19jdGEge1xyXG4gICAgZm9udC13ZWlnaHQ6IDUwMDtcclxuICAgIGN1cnNvcjogcG9pbnRlcjtcclxuICAgIHNwYW4ge1xyXG4gICAgICBmb250LXdlaWdodDogNDAwO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgaW5wdXQge1xyXG4gICAgb3BhY2l0eTogMDtcclxuICB9XHJcbn1cclxuIl19 */\"] });\r\n"]},"metadata":{},"sourceType":"module"}