{"ast":null,"code":"import { FormControl } from '@angular/forms';\nimport { routeChanged$ } from '@core/route-changed';\nimport { BehaviorSubject, combineLatest, merge, Subject } from 'rxjs';\nimport { map, startWith, switchMap } from 'rxjs/operators';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@api\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"@angular/common\";\nimport * as i4 from \"../@shared/components/two-column-layout/two-column-layout.component\";\nimport * as i5 from \"@angular/material/button\";\nimport * as i6 from \"@angular/material/icon\";\nimport * as i7 from \"../@shared/components/search-stories-control/search-stories-control.component\";\nimport * as i8 from \"@angular/forms\";\n\nconst _c0 = function () {\n  return [\"/\", \"stories\", \"create\"];\n};\n\nfunction StoriesComponent_ng_container_0_div_2_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r7 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"div\", 5)(1, \"h1\", 6)(2, \"span\");\n    i0.ɵɵtext(3, \"Create Story\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(4, \"button\", 7);\n    i0.ɵɵlistener(\"click\", function StoriesComponent_ng_container_0_div_2_Template_button_click_4_listener() {\n      i0.ɵɵrestoreView(_r7);\n      const ctx_r6 = i0.ɵɵnextContext(2);\n      return ctx_r6.onSearchClick();\n    });\n    i0.ɵɵelementStart(5, \"mat-icon\");\n    i0.ɵɵtext(6, \" search \");\n    i0.ɵɵelementEnd()()();\n  }\n\n  if (rf & 2) {\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"routerLink\", i0.ɵɵpureFunction0(1, _c0));\n  }\n}\n\nfunction StoriesComponent_ng_container_0_bl_search_stories_control_3_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r9 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"bl-search-stories-control\", 8);\n    i0.ɵɵlistener(\"closeClick\", function StoriesComponent_ng_container_0_bl_search_stories_control_3_Template_bl_search_stories_control_closeClick_0_listener() {\n      i0.ɵɵrestoreView(_r9);\n      const ctx_r8 = i0.ɵɵnextContext(2);\n      return ctx_r8.onCloseClick();\n    });\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r3 = i0.ɵɵnextContext(2);\n    i0.ɵɵproperty(\"formControl\", ctx_r3.searchControl);\n  }\n}\n\nconst _c1 = function (a3) {\n  return [\"/\", \"stories\", \"edit\", a3];\n};\n\nfunction StoriesComponent_ng_container_0_span_5_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 9);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const story_r10 = ctx.$implicit;\n    i0.ɵɵproperty(\"routerLink\", i0.ɵɵpureFunction1(2, _c1, story_r10.storyId));\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(story_r10.title);\n  }\n}\n\nfunction StoriesComponent_ng_container_0_div_6_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtext(1);\n    i0.ɵɵelementStart(2, \"a\", 9);\n    i0.ɵɵtext(3, \"Create Story\");\n    i0.ɵɵelementEnd()();\n  }\n\n  if (rf & 2) {\n    const vm_r1 = i0.ɵɵnextContext().ngIf;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" Nothing found for \", vm_r1.query, \". \");\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"routerLink\", i0.ɵɵpureFunction0(2, _c0));\n  }\n}\n\nfunction StoriesComponent_ng_container_0_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelementStart(1, \"bl-two-column-layout\");\n    i0.ɵɵtemplate(2, StoriesComponent_ng_container_0_div_2_Template, 7, 2, \"div\", 1);\n    i0.ɵɵtemplate(3, StoriesComponent_ng_container_0_bl_search_stories_control_3_Template, 1, 1, \"bl-search-stories-control\", 2);\n    i0.ɵɵelementStart(4, \"div\", 3);\n    i0.ɵɵtemplate(5, StoriesComponent_ng_container_0_span_5_Template, 2, 4, \"span\", 4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(6, StoriesComponent_ng_container_0_div_6_Template, 4, 3, \"div\", 0);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementContainerEnd();\n  }\n\n  if (rf & 2) {\n    const vm_r1 = ctx.ngIf;\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", !vm_r1.searchEnabled);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", vm_r1.searchEnabled);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngForOf\", vm_r1.stories);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", vm_r1.stories.length == 0 && vm_r1.searchEnabled && vm_r1.query);\n  }\n}\n\nexport class StoriesComponent {\n  constructor(_storyService, _router) {\n    this._storyService = _storyService;\n    this._router = _router;\n    this._searchEnabledSubject = new Subject();\n    this._searchEnabled$ = this._searchEnabledSubject.asObservable();\n    this._refreshSubject = new BehaviorSubject(null);\n    this._refresh$ = this._refreshSubject.asObservable();\n    this.searchControl = new FormControl(null, []);\n    this.vm$ = merge(this._refresh$, routeChanged$(this._router)).pipe(switchMap(_ => combineLatest([this._storyService.get(), this._searchEnabled$.pipe(startWith(false))])), map(([stories, searchEnabled]) => {\n      return {\n        stories,\n        searchEnabled,\n        query: this.searchControl.value\n      };\n    }));\n  }\n\n  onSearchClick() {\n    this._searchEnabledSubject.next(true);\n  }\n\n  onCloseClick() {\n    this._searchEnabledSubject.next(false);\n  }\n\n}\n\nStoriesComponent.ɵfac = function StoriesComponent_Factory(t) {\n  return new (t || StoriesComponent)(i0.ɵɵdirectiveInject(i1.StoryService), i0.ɵɵdirectiveInject(i2.Router));\n};\n\nStoriesComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: StoriesComponent,\n  selectors: [[\"bl-stories\"]],\n  decls: 2,\n  vars: 3,\n  consts: [[4, \"ngIf\"], [\"class\", \"bl-title-bar\", 4, \"ngIf\"], [3, \"formControl\", \"closeClick\", 4, \"ngIf\"], [1, \"stories__list\"], [3, \"routerLink\", 4, \"ngFor\", \"ngForOf\"], [1, \"bl-title-bar\"], [1, \"bl-title\", 3, \"routerLink\"], [\"mat-icon-button\", \"\", \"tabindex\", \"-1\", 3, \"click\"], [3, \"formControl\", \"closeClick\"], [3, \"routerLink\"]],\n  template: function StoriesComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵtemplate(0, StoriesComponent_ng_container_0_Template, 7, 4, \"ng-container\", 0);\n      i0.ɵɵpipe(1, \"async\");\n    }\n\n    if (rf & 2) {\n      i0.ɵɵproperty(\"ngIf\", i0.ɵɵpipeBind1(1, 1, ctx.vm$));\n    }\n  },\n  directives: [i3.NgIf, i4.TwoColumnLayoutComponent, i2.RouterLink, i5.MatButton, i6.MatIcon, i7.SearchStoriesControlComponent, i8.NgControlStatus, i8.FormControlDirective, i3.NgForOf, i2.RouterLinkWithHref],\n  pipes: [i3.AsyncPipe],\n  styles: [\"[_nghost-%COMP%]   .bl-title-bar[_ngcontent-%COMP%] {\\n  margin-bottom: 40px;\\n}\\n[_nghost-%COMP%]   .stories__list[_ngcontent-%COMP%] {\\n  display: grid;\\n  grid-row-gap: 20px;\\n  row-gap: 20px;\\n  grid-template-columns: 1fr;\\n}\\n[_nghost-%COMP%]   .stories__list[_ngcontent-%COMP%]   span[_ngcontent-%COMP%] {\\n  font-size: 16px;\\n  line-height: 24px;\\n  cursor: pointer;\\n}\\n[_nghost-%COMP%]   .stories__list[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:hover {\\n  font-weight: 500;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInN0b3JpZXMuY29tcG9uZW50LnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBR0U7RUFDRSxtQkFBQTtBQUZKO0FBS0U7RUFDRSxhQUFBO0VBQ0Esa0JBQUE7RUFBQSxhQUFBO0VBQ0EsMEJBQUE7QUFISjtBQUtJO0VBQ0UsZUFBQTtFQUNBLGlCQUFBO0VBQ0EsZUFBQTtBQUhOO0FBS007RUFDRSxnQkFBQTtBQUhSIiwiZmlsZSI6InN0b3JpZXMuY29tcG9uZW50LnNjc3MiLCJzb3VyY2VzQ29udGVudCI6WyJAdXNlICdzcmMvc2Nzcy9icmVha3BvaW50cyc7XHJcblxyXG46aG9zdCB7XHJcbiAgLmJsLXRpdGxlLWJhciB7XHJcbiAgICBtYXJnaW4tYm90dG9tOiA0MHB4O1xyXG4gIH1cclxuXHJcbiAgLnN0b3JpZXNfX2xpc3Qge1xyXG4gICAgZGlzcGxheTogZ3JpZDtcclxuICAgIHJvdy1nYXA6IDIwcHg7XHJcbiAgICBncmlkLXRlbXBsYXRlLWNvbHVtbnM6IDFmcjtcclxuXHJcbiAgICBzcGFuIHtcclxuICAgICAgZm9udC1zaXplOiAxNnB4O1xyXG4gICAgICBsaW5lLWhlaWdodDogMjRweDtcclxuICAgICAgY3Vyc29yOiBwb2ludGVyO1xyXG5cclxuICAgICAgJjpob3ZlciB7XHJcbiAgICAgICAgZm9udC13ZWlnaHQ6IDUwMDtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxufVxyXG4iXX0= */\"]\n});","map":{"version":3,"sources":["C:/projects/Backlog/src/Backlog.App/src/app/stories/stories.component.ts"],"names":["FormControl","routeChanged$","BehaviorSubject","combineLatest","merge","Subject","map","startWith","switchMap","i0","i1","i2","i3","i4","i5","i6","i7","i8","_c0","StoriesComponent_ng_container_0_div_2_Template","rf","ctx","_r7","ɵɵgetCurrentView","ɵɵelementStart","ɵɵtext","ɵɵelementEnd","ɵɵlistener","StoriesComponent_ng_container_0_div_2_Template_button_click_4_listener","ɵɵrestoreView","ctx_r6","ɵɵnextContext","onSearchClick","ɵɵadvance","ɵɵproperty","ɵɵpureFunction0","StoriesComponent_ng_container_0_bl_search_stories_control_3_Template","_r9","StoriesComponent_ng_container_0_bl_search_stories_control_3_Template_bl_search_stories_control_closeClick_0_listener","ctx_r8","onCloseClick","ctx_r3","searchControl","_c1","a3","StoriesComponent_ng_container_0_span_5_Template","story_r10","$implicit","ɵɵpureFunction1","storyId","ɵɵtextInterpolate","title","StoriesComponent_ng_container_0_div_6_Template","vm_r1","ngIf","ɵɵtextInterpolate1","query","StoriesComponent_ng_container_0_Template","ɵɵelementContainerStart","ɵɵtemplate","ɵɵelementContainerEnd","searchEnabled","stories","length","StoriesComponent","constructor","_storyService","_router","_searchEnabledSubject","_searchEnabled$","asObservable","_refreshSubject","_refresh$","vm$","pipe","_","get","value","next","ɵfac","StoriesComponent_Factory","t","ɵɵdirectiveInject","StoryService","Router","ɵcmp","ɵɵdefineComponent","type","selectors","decls","vars","consts","template","StoriesComponent_Template","ɵɵpipe","ɵɵpipeBind1","directives","NgIf","TwoColumnLayoutComponent","RouterLink","MatButton","MatIcon","SearchStoriesControlComponent","NgControlStatus","FormControlDirective","NgForOf","RouterLinkWithHref","pipes","AsyncPipe","styles"],"mappings":"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","sourcesContent":["import { FormControl } from '@angular/forms';\r\nimport { routeChanged$ } from '@core/route-changed';\r\nimport { BehaviorSubject, combineLatest, merge, Subject } from 'rxjs';\r\nimport { map, startWith, switchMap } from 'rxjs/operators';\r\nimport * as i0 from \"@angular/core\";\r\nimport * as i1 from \"@api\";\r\nimport * as i2 from \"@angular/router\";\r\nimport * as i3 from \"@angular/common\";\r\nimport * as i4 from \"../@shared/components/two-column-layout/two-column-layout.component\";\r\nimport * as i5 from \"@angular/material/button\";\r\nimport * as i6 from \"@angular/material/icon\";\r\nimport * as i7 from \"../@shared/components/search-stories-control/search-stories-control.component\";\r\nimport * as i8 from \"@angular/forms\";\r\nconst _c0 = function () { return [\"/\", \"stories\", \"create\"]; };\r\nfunction StoriesComponent_ng_container_0_div_2_Template(rf, ctx) { if (rf & 1) {\r\n    const _r7 = i0.ɵɵgetCurrentView();\r\n    i0.ɵɵelementStart(0, \"div\", 5)(1, \"h1\", 6)(2, \"span\");\r\n    i0.ɵɵtext(3, \"Create Story\");\r\n    i0.ɵɵelementEnd()();\r\n    i0.ɵɵelementStart(4, \"button\", 7);\r\n    i0.ɵɵlistener(\"click\", function StoriesComponent_ng_container_0_div_2_Template_button_click_4_listener() { i0.ɵɵrestoreView(_r7); const ctx_r6 = i0.ɵɵnextContext(2); return ctx_r6.onSearchClick(); });\r\n    i0.ɵɵelementStart(5, \"mat-icon\");\r\n    i0.ɵɵtext(6, \" search \");\r\n    i0.ɵɵelementEnd()()();\r\n} if (rf & 2) {\r\n    i0.ɵɵadvance(1);\r\n    i0.ɵɵproperty(\"routerLink\", i0.ɵɵpureFunction0(1, _c0));\r\n} }\r\nfunction StoriesComponent_ng_container_0_bl_search_stories_control_3_Template(rf, ctx) { if (rf & 1) {\r\n    const _r9 = i0.ɵɵgetCurrentView();\r\n    i0.ɵɵelementStart(0, \"bl-search-stories-control\", 8);\r\n    i0.ɵɵlistener(\"closeClick\", function StoriesComponent_ng_container_0_bl_search_stories_control_3_Template_bl_search_stories_control_closeClick_0_listener() { i0.ɵɵrestoreView(_r9); const ctx_r8 = i0.ɵɵnextContext(2); return ctx_r8.onCloseClick(); });\r\n    i0.ɵɵelementEnd();\r\n} if (rf & 2) {\r\n    const ctx_r3 = i0.ɵɵnextContext(2);\r\n    i0.ɵɵproperty(\"formControl\", ctx_r3.searchControl);\r\n} }\r\nconst _c1 = function (a3) { return [\"/\", \"stories\", \"edit\", a3]; };\r\nfunction StoriesComponent_ng_container_0_span_5_Template(rf, ctx) { if (rf & 1) {\r\n    i0.ɵɵelementStart(0, \"span\", 9);\r\n    i0.ɵɵtext(1);\r\n    i0.ɵɵelementEnd();\r\n} if (rf & 2) {\r\n    const story_r10 = ctx.$implicit;\r\n    i0.ɵɵproperty(\"routerLink\", i0.ɵɵpureFunction1(2, _c1, story_r10.storyId));\r\n    i0.ɵɵadvance(1);\r\n    i0.ɵɵtextInterpolate(story_r10.title);\r\n} }\r\nfunction StoriesComponent_ng_container_0_div_6_Template(rf, ctx) { if (rf & 1) {\r\n    i0.ɵɵelementStart(0, \"div\");\r\n    i0.ɵɵtext(1);\r\n    i0.ɵɵelementStart(2, \"a\", 9);\r\n    i0.ɵɵtext(3, \"Create Story\");\r\n    i0.ɵɵelementEnd()();\r\n} if (rf & 2) {\r\n    const vm_r1 = i0.ɵɵnextContext().ngIf;\r\n    i0.ɵɵadvance(1);\r\n    i0.ɵɵtextInterpolate1(\" Nothing found for \", vm_r1.query, \". \");\r\n    i0.ɵɵadvance(1);\r\n    i0.ɵɵproperty(\"routerLink\", i0.ɵɵpureFunction0(2, _c0));\r\n} }\r\nfunction StoriesComponent_ng_container_0_Template(rf, ctx) { if (rf & 1) {\r\n    i0.ɵɵelementContainerStart(0);\r\n    i0.ɵɵelementStart(1, \"bl-two-column-layout\");\r\n    i0.ɵɵtemplate(2, StoriesComponent_ng_container_0_div_2_Template, 7, 2, \"div\", 1);\r\n    i0.ɵɵtemplate(3, StoriesComponent_ng_container_0_bl_search_stories_control_3_Template, 1, 1, \"bl-search-stories-control\", 2);\r\n    i0.ɵɵelementStart(4, \"div\", 3);\r\n    i0.ɵɵtemplate(5, StoriesComponent_ng_container_0_span_5_Template, 2, 4, \"span\", 4);\r\n    i0.ɵɵelementEnd();\r\n    i0.ɵɵtemplate(6, StoriesComponent_ng_container_0_div_6_Template, 4, 3, \"div\", 0);\r\n    i0.ɵɵelementEnd();\r\n    i0.ɵɵelementContainerEnd();\r\n} if (rf & 2) {\r\n    const vm_r1 = ctx.ngIf;\r\n    i0.ɵɵadvance(2);\r\n    i0.ɵɵproperty(\"ngIf\", !vm_r1.searchEnabled);\r\n    i0.ɵɵadvance(1);\r\n    i0.ɵɵproperty(\"ngIf\", vm_r1.searchEnabled);\r\n    i0.ɵɵadvance(2);\r\n    i0.ɵɵproperty(\"ngForOf\", vm_r1.stories);\r\n    i0.ɵɵadvance(1);\r\n    i0.ɵɵproperty(\"ngIf\", vm_r1.stories.length == 0 && vm_r1.searchEnabled && vm_r1.query);\r\n} }\r\nexport class StoriesComponent {\r\n    constructor(_storyService, _router) {\r\n        this._storyService = _storyService;\r\n        this._router = _router;\r\n        this._searchEnabledSubject = new Subject();\r\n        this._searchEnabled$ = this._searchEnabledSubject.asObservable();\r\n        this._refreshSubject = new BehaviorSubject(null);\r\n        this._refresh$ = this._refreshSubject.asObservable();\r\n        this.searchControl = new FormControl(null, []);\r\n        this.vm$ = merge(this._refresh$, routeChanged$(this._router))\r\n            .pipe(switchMap(_ => combineLatest([\r\n            this._storyService.get(),\r\n            this._searchEnabled$.pipe(startWith(false))\r\n        ])), map(([stories, searchEnabled]) => {\r\n            return {\r\n                stories,\r\n                searchEnabled,\r\n                query: this.searchControl.value\r\n            };\r\n        }));\r\n    }\r\n    onSearchClick() {\r\n        this._searchEnabledSubject.next(true);\r\n    }\r\n    onCloseClick() {\r\n        this._searchEnabledSubject.next(false);\r\n    }\r\n}\r\nStoriesComponent.ɵfac = function StoriesComponent_Factory(t) { return new (t || StoriesComponent)(i0.ɵɵdirectiveInject(i1.StoryService), i0.ɵɵdirectiveInject(i2.Router)); };\r\nStoriesComponent.ɵcmp = /*@__PURE__*/ i0.ɵɵdefineComponent({ type: StoriesComponent, selectors: [[\"bl-stories\"]], decls: 2, vars: 3, consts: [[4, \"ngIf\"], [\"class\", \"bl-title-bar\", 4, \"ngIf\"], [3, \"formControl\", \"closeClick\", 4, \"ngIf\"], [1, \"stories__list\"], [3, \"routerLink\", 4, \"ngFor\", \"ngForOf\"], [1, \"bl-title-bar\"], [1, \"bl-title\", 3, \"routerLink\"], [\"mat-icon-button\", \"\", \"tabindex\", \"-1\", 3, \"click\"], [3, \"formControl\", \"closeClick\"], [3, \"routerLink\"]], template: function StoriesComponent_Template(rf, ctx) { if (rf & 1) {\r\n        i0.ɵɵtemplate(0, StoriesComponent_ng_container_0_Template, 7, 4, \"ng-container\", 0);\r\n        i0.ɵɵpipe(1, \"async\");\r\n    } if (rf & 2) {\r\n        i0.ɵɵproperty(\"ngIf\", i0.ɵɵpipeBind1(1, 1, ctx.vm$));\r\n    } }, directives: [i3.NgIf, i4.TwoColumnLayoutComponent, i2.RouterLink, i5.MatButton, i6.MatIcon, i7.SearchStoriesControlComponent, i8.NgControlStatus, i8.FormControlDirective, i3.NgForOf, i2.RouterLinkWithHref], pipes: [i3.AsyncPipe], styles: [\"[_nghost-%COMP%]   .bl-title-bar[_ngcontent-%COMP%] {\\n  margin-bottom: 40px;\\n}\\n[_nghost-%COMP%]   .stories__list[_ngcontent-%COMP%] {\\n  display: grid;\\n  grid-row-gap: 20px;\\n  row-gap: 20px;\\n  grid-template-columns: 1fr;\\n}\\n[_nghost-%COMP%]   .stories__list[_ngcontent-%COMP%]   span[_ngcontent-%COMP%] {\\n  font-size: 16px;\\n  line-height: 24px;\\n  cursor: pointer;\\n}\\n[_nghost-%COMP%]   .stories__list[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:hover {\\n  font-weight: 500;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInN0b3JpZXMuY29tcG9uZW50LnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBR0U7RUFDRSxtQkFBQTtBQUZKO0FBS0U7RUFDRSxhQUFBO0VBQ0Esa0JBQUE7RUFBQSxhQUFBO0VBQ0EsMEJBQUE7QUFISjtBQUtJO0VBQ0UsZUFBQTtFQUNBLGlCQUFBO0VBQ0EsZUFBQTtBQUhOO0FBS007RUFDRSxnQkFBQTtBQUhSIiwiZmlsZSI6InN0b3JpZXMuY29tcG9uZW50LnNjc3MiLCJzb3VyY2VzQ29udGVudCI6WyJAdXNlICdzcmMvc2Nzcy9icmVha3BvaW50cyc7XHJcblxyXG46aG9zdCB7XHJcbiAgLmJsLXRpdGxlLWJhciB7XHJcbiAgICBtYXJnaW4tYm90dG9tOiA0MHB4O1xyXG4gIH1cclxuXHJcbiAgLnN0b3JpZXNfX2xpc3Qge1xyXG4gICAgZGlzcGxheTogZ3JpZDtcclxuICAgIHJvdy1nYXA6IDIwcHg7XHJcbiAgICBncmlkLXRlbXBsYXRlLWNvbHVtbnM6IDFmcjtcclxuXHJcbiAgICBzcGFuIHtcclxuICAgICAgZm9udC1zaXplOiAxNnB4O1xyXG4gICAgICBsaW5lLWhlaWdodDogMjRweDtcclxuICAgICAgY3Vyc29yOiBwb2ludGVyO1xyXG5cclxuICAgICAgJjpob3ZlciB7XHJcbiAgICAgICAgZm9udC13ZWlnaHQ6IDUwMDtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxufVxyXG4iXX0= */\"] });\r\n"]},"metadata":{},"sourceType":"module"}