{"ast":null,"code":"import { combine } from '@core';\nimport { BehaviorSubject, from, of, Subject } from 'rxjs';\nimport { map, switchMap, tap } from 'rxjs/operators';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/router\";\nimport * as i2 from \"@api\";\nimport * as i3 from \"@angular/common\";\nimport * as i4 from \"../@shared/directives/list-detail.directive\";\nimport * as i5 from \"../@shared/components/sprint-list/sprint-list.component\";\nimport * as i6 from \"../@shared/components/sprint-detail/sprint-detail.component\";\n\nfunction SprintsComponent_div_0_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r3 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"div\", 1)(1, \"bl-sprint-list\", 2);\n    i0.ɵɵlistener(\"delete\", function SprintsComponent_div_0_Template_bl_sprint_list_delete_1_listener($event) {\n      i0.ɵɵrestoreView(_r3);\n      const ctx_r2 = i0.ɵɵnextContext();\n      return ctx_r2.onDelete($event);\n    })(\"select\", function SprintsComponent_div_0_Template_bl_sprint_list_select_1_listener($event) {\n      i0.ɵɵrestoreView(_r3);\n      const ctx_r4 = i0.ɵɵnextContext();\n      return ctx_r4.onSelect($event);\n    })(\"create\", function SprintsComponent_div_0_Template_bl_sprint_list_create_1_listener() {\n      i0.ɵɵrestoreView(_r3);\n      const ctx_r5 = i0.ɵɵnextContext();\n      return ctx_r5.onCreate();\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(2, \"bl-sprint-detail\", 3);\n    i0.ɵɵlistener(\"save\", function SprintsComponent_div_0_Template_bl_sprint_detail_save_2_listener($event) {\n      i0.ɵɵrestoreView(_r3);\n      const ctx_r6 = i0.ɵɵnextContext();\n      return ctx_r6.onSave($event);\n    });\n    i0.ɵɵelementEnd()();\n  }\n\n  if (rf & 2) {\n    const vm_r1 = ctx.ngIf;\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"sprints\", vm_r1.sprints)(\"selected\", vm_r1.selected);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"sprint\", vm_r1.selected);\n  }\n}\n\nexport class SprintsComponent {\n  constructor(_activatedRoute, _sprintService, _router) {\n    this._activatedRoute = _activatedRoute;\n    this._sprintService = _sprintService;\n    this._router = _router;\n    this._saveSubject = new Subject();\n    this._selectSubject = new Subject();\n    this._createSubject = new Subject();\n    this._deleteSubject = new Subject();\n    this._refreshSubject = new BehaviorSubject(null);\n    this.vm$ = this._refreshSubject.pipe(switchMap(_ => combine([this._sprintService.get(), this._selected$, this._createSubject.pipe(switchMap(_ => this._handleCreate())), this._saveSubject.pipe(switchMap(sprint => this._handleSave(sprint))), this._selectSubject.pipe(switchMap(sprint => this._handleSelect(sprint))), this._deleteSubject.pipe(switchMap(sprint => this._handleDelete(sprint)))])), map(([sprints, selected]) => ({\n      sprints,\n      selected\n    })));\n    this._selected$ = this._activatedRoute.paramMap.pipe(map(x => x.get(\"sprintId\")), switchMap(sprintId => sprintId ? this._sprintService.getById({\n      sprintId\n    }) : of({})));\n  }\n\n  _handleSelect(sprint) {\n    return from(this._router.navigate([\"/\", \"sprints\", \"edit\", sprint.sprintId]));\n  }\n\n  _handleCreate() {\n    return from(this._router.navigate([\"/\", \"sprints\", \"create\"]));\n  }\n\n  _handleSave(sprint) {\n    return (sprint.sprintId ? this._sprintService.update({\n      sprint\n    }) : this._sprintService.create({\n      sprint\n    })).pipe(switchMap(_ => this._router.navigate([\"/\", \"sprints\"])), tap(_ => this._refreshSubject.next(null)));\n  }\n\n  _handleDelete(sprint) {\n    return this._sprintService.remove({\n      sprint\n    }).pipe(switchMap(_ => this._router.navigate([\"/\", \"sprints\"])), tap(_ => this._refreshSubject.next(null)));\n  }\n\n  onSave(sprint) {\n    this._saveSubject.next(sprint);\n  }\n\n  onSelect(sprint) {\n    this._selectSubject.next(sprint);\n  }\n\n  onCreate() {\n    this._createSubject.next();\n  }\n\n  onDelete(sprint) {\n    this._deleteSubject.next(sprint);\n  }\n\n}\n\nSprintsComponent.ɵfac = function SprintsComponent_Factory(t) {\n  return new (t || SprintsComponent)(i0.ɵɵdirectiveInject(i1.ActivatedRoute), i0.ɵɵdirectiveInject(i2.SprintService), i0.ɵɵdirectiveInject(i1.Router));\n};\n\nSprintsComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: SprintsComponent,\n  selectors: [[\"bl-sprints\"]],\n  decls: 2,\n  vars: 3,\n  consts: [[\"blListDetail\", \"\", 4, \"ngIf\"], [\"blListDetail\", \"\"], [3, \"sprints\", \"selected\", \"delete\", \"select\", \"create\"], [3, \"sprint\", \"save\"]],\n  template: function SprintsComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵtemplate(0, SprintsComponent_div_0_Template, 3, 3, \"div\", 0);\n      i0.ɵɵpipe(1, \"async\");\n    }\n\n    if (rf & 2) {\n      i0.ɵɵproperty(\"ngIf\", i0.ɵɵpipeBind1(1, 1, ctx.vm$));\n    }\n  },\n  directives: [i3.NgIf, i4.ListDetailDirective, i5.SprintListComponent, i6.SprintDetailComponent],\n  pipes: [i3.AsyncPipe],\n  styles: [\"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcHJpbnRzLmNvbXBvbmVudC5zY3NzIn0= */\"],\n  changeDetection: 0\n});","map":{"version":3,"sources":["C:/projects/Backlog/src/Backlog.App/src/app/sprints/sprints.component.ts"],"names":["combine","BehaviorSubject","from","of","Subject","map","switchMap","tap","i0","i1","i2","i3","i4","i5","i6","SprintsComponent_div_0_Template","rf","ctx","_r3","ɵɵgetCurrentView","ɵɵelementStart","ɵɵlistener","SprintsComponent_div_0_Template_bl_sprint_list_delete_1_listener","$event","ɵɵrestoreView","ctx_r2","ɵɵnextContext","onDelete","SprintsComponent_div_0_Template_bl_sprint_list_select_1_listener","ctx_r4","onSelect","SprintsComponent_div_0_Template_bl_sprint_list_create_1_listener","ctx_r5","onCreate","ɵɵelementEnd","SprintsComponent_div_0_Template_bl_sprint_detail_save_2_listener","ctx_r6","onSave","vm_r1","ngIf","ɵɵadvance","ɵɵproperty","sprints","selected","SprintsComponent","constructor","_activatedRoute","_sprintService","_router","_saveSubject","_selectSubject","_createSubject","_deleteSubject","_refreshSubject","vm$","pipe","_","get","_selected$","_handleCreate","sprint","_handleSave","_handleSelect","_handleDelete","paramMap","x","sprintId","getById","navigate","update","create","next","remove","ɵfac","SprintsComponent_Factory","t","ɵɵdirectiveInject","ActivatedRoute","SprintService","Router","ɵcmp","ɵɵdefineComponent","type","selectors","decls","vars","consts","template","SprintsComponent_Template","ɵɵtemplate","ɵɵpipe","ɵɵpipeBind1","directives","NgIf","ListDetailDirective","SprintListComponent","SprintDetailComponent","pipes","AsyncPipe","styles","changeDetection"],"mappings":"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","sourcesContent":["import { combine } from '@core';\r\nimport { BehaviorSubject, from, of, Subject } from 'rxjs';\r\nimport { map, switchMap, tap } from 'rxjs/operators';\r\nimport * as i0 from \"@angular/core\";\r\nimport * as i1 from \"@angular/router\";\r\nimport * as i2 from \"@api\";\r\nimport * as i3 from \"@angular/common\";\r\nimport * as i4 from \"../@shared/directives/list-detail.directive\";\r\nimport * as i5 from \"../@shared/components/sprint-list/sprint-list.component\";\r\nimport * as i6 from \"../@shared/components/sprint-detail/sprint-detail.component\";\r\nfunction SprintsComponent_div_0_Template(rf, ctx) { if (rf & 1) {\r\n    const _r3 = i0.ɵɵgetCurrentView();\r\n    i0.ɵɵelementStart(0, \"div\", 1)(1, \"bl-sprint-list\", 2);\r\n    i0.ɵɵlistener(\"delete\", function SprintsComponent_div_0_Template_bl_sprint_list_delete_1_listener($event) { i0.ɵɵrestoreView(_r3); const ctx_r2 = i0.ɵɵnextContext(); return ctx_r2.onDelete($event); })(\"select\", function SprintsComponent_div_0_Template_bl_sprint_list_select_1_listener($event) { i0.ɵɵrestoreView(_r3); const ctx_r4 = i0.ɵɵnextContext(); return ctx_r4.onSelect($event); })(\"create\", function SprintsComponent_div_0_Template_bl_sprint_list_create_1_listener() { i0.ɵɵrestoreView(_r3); const ctx_r5 = i0.ɵɵnextContext(); return ctx_r5.onCreate(); });\r\n    i0.ɵɵelementEnd();\r\n    i0.ɵɵelementStart(2, \"bl-sprint-detail\", 3);\r\n    i0.ɵɵlistener(\"save\", function SprintsComponent_div_0_Template_bl_sprint_detail_save_2_listener($event) { i0.ɵɵrestoreView(_r3); const ctx_r6 = i0.ɵɵnextContext(); return ctx_r6.onSave($event); });\r\n    i0.ɵɵelementEnd()();\r\n} if (rf & 2) {\r\n    const vm_r1 = ctx.ngIf;\r\n    i0.ɵɵadvance(1);\r\n    i0.ɵɵproperty(\"sprints\", vm_r1.sprints)(\"selected\", vm_r1.selected);\r\n    i0.ɵɵadvance(1);\r\n    i0.ɵɵproperty(\"sprint\", vm_r1.selected);\r\n} }\r\nexport class SprintsComponent {\r\n    constructor(_activatedRoute, _sprintService, _router) {\r\n        this._activatedRoute = _activatedRoute;\r\n        this._sprintService = _sprintService;\r\n        this._router = _router;\r\n        this._saveSubject = new Subject();\r\n        this._selectSubject = new Subject();\r\n        this._createSubject = new Subject();\r\n        this._deleteSubject = new Subject();\r\n        this._refreshSubject = new BehaviorSubject(null);\r\n        this.vm$ = this._refreshSubject\r\n            .pipe(switchMap(_ => combine([\r\n            this._sprintService.get(),\r\n            this._selected$,\r\n            this._createSubject.pipe(switchMap(_ => this._handleCreate())),\r\n            this._saveSubject.pipe(switchMap(sprint => this._handleSave(sprint))),\r\n            this._selectSubject.pipe(switchMap(sprint => this._handleSelect(sprint))),\r\n            this._deleteSubject.pipe(switchMap(sprint => this._handleDelete(sprint)))\r\n        ])), map(([sprints, selected]) => ({ sprints, selected })));\r\n        this._selected$ = this._activatedRoute\r\n            .paramMap\r\n            .pipe(map(x => x.get(\"sprintId\")), switchMap((sprintId) => sprintId ? this._sprintService.getById({ sprintId }) : of({})));\r\n    }\r\n    _handleSelect(sprint) {\r\n        return from(this._router.navigate([\"/\", \"sprints\", \"edit\", sprint.sprintId]));\r\n    }\r\n    _handleCreate() {\r\n        return from(this._router.navigate([\"/\", \"sprints\", \"create\"]));\r\n    }\r\n    _handleSave(sprint) {\r\n        return (sprint.sprintId ? this._sprintService.update({ sprint }) : this._sprintService.create({ sprint }))\r\n            .pipe(switchMap(_ => this._router.navigate([\"/\", \"sprints\"])), tap(_ => this._refreshSubject.next(null)));\r\n    }\r\n    _handleDelete(sprint) {\r\n        return this._sprintService.remove({ sprint })\r\n            .pipe(switchMap(_ => this._router.navigate([\"/\", \"sprints\"])), tap(_ => this._refreshSubject.next(null)));\r\n    }\r\n    onSave(sprint) {\r\n        this._saveSubject.next(sprint);\r\n    }\r\n    onSelect(sprint) {\r\n        this._selectSubject.next(sprint);\r\n    }\r\n    onCreate() {\r\n        this._createSubject.next();\r\n    }\r\n    onDelete(sprint) {\r\n        this._deleteSubject.next(sprint);\r\n    }\r\n}\r\nSprintsComponent.ɵfac = function SprintsComponent_Factory(t) { return new (t || SprintsComponent)(i0.ɵɵdirectiveInject(i1.ActivatedRoute), i0.ɵɵdirectiveInject(i2.SprintService), i0.ɵɵdirectiveInject(i1.Router)); };\r\nSprintsComponent.ɵcmp = /*@__PURE__*/ i0.ɵɵdefineComponent({ type: SprintsComponent, selectors: [[\"bl-sprints\"]], decls: 2, vars: 3, consts: [[\"blListDetail\", \"\", 4, \"ngIf\"], [\"blListDetail\", \"\"], [3, \"sprints\", \"selected\", \"delete\", \"select\", \"create\"], [3, \"sprint\", \"save\"]], template: function SprintsComponent_Template(rf, ctx) { if (rf & 1) {\r\n        i0.ɵɵtemplate(0, SprintsComponent_div_0_Template, 3, 3, \"div\", 0);\r\n        i0.ɵɵpipe(1, \"async\");\r\n    } if (rf & 2) {\r\n        i0.ɵɵproperty(\"ngIf\", i0.ɵɵpipeBind1(1, 1, ctx.vm$));\r\n    } }, directives: [i3.NgIf, i4.ListDetailDirective, i5.SprintListComponent, i6.SprintDetailComponent], pipes: [i3.AsyncPipe], styles: [\"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcHJpbnRzLmNvbXBvbmVudC5zY3NzIn0= */\"], changeDetection: 0 });\r\n"]},"metadata":{},"sourceType":"module"}